var SENORWEBGL1=SENORWEBGL1||function(){var b=this,c=b.gl=null;b.activate=function(a){if("object"!==typeof a||null===a)a={};if("object"!==typeof a.canvas||null===a.canvas)return!1;if("object"!==typeof a.color||null===a.color)a.color=[1,1,1,1];if("boolean"!==typeof a.antialias||null===a.antialias)a.antialias=!0;if("boolean"!==typeof a.stencil||null===a.stencil)a.stencil=!1;b.gl=a.canvas.getContext("webgl",{antialias:a.antialias,stencil:a.stencil})||a.canvas.getContext("experimental-webgl",{antialias:a.antialias,
stencil:a.stencil});if(!b.gl)return alert("Unable to initialize WebGL. Your browser may not support it."),!1;if("number"!==typeof a.cullface||null===a.cullface)a.cullface=b.gl.BACK;if("number"!==typeof a.frontface||null===a.frontface)a.frontface=b.gl.CCW;if("number"!==typeof a.depthfunc||null===a.depthfunc)a.depthfunc=b.gl.LEQUAL;if("boolean"!==typeof a.enable_cullface||null===a.enable_cullface)a.enable_cullface=!0;if("boolean"!==typeof a.enable_depthtest||null===a.enable_depthtest)a.enable_depthtest=
!0;b.gl.viewport(0,0,a.canvas.width,a.canvas.height);c=new Float32Array(a.color);a.enable_cullface&&(b.gl.cullFace(a.cullface),b.gl.frontFace(a.frontface),b.gl.enable(b.gl.CULL_FACE));a.enable_depthtest&&(b.gl.depthFunc(a.depthfunc),b.gl.enable(b.gl.DEPTH_TEST));b.gl.clearColor(c[0],c[1],c[2],c[3]);a.stencil?b.gl.clear(b.gl.COLOR_BUFFER_BIT|b.gl.DEPTH_BUFFER_BIT|b.gl.STENCIL_BUFFER_BIT):b.gl.clear(b.gl.COLOR_BUFFER_BIT|b.gl.DEPTH_BUFFER_BIT)};b.clear=function(a){if("object"!==typeof a||null===a)a=
{};if("object"!==typeof a.color||null===a.color)a.color=[];4===a.color.length?(a=new Float32Array(a.color),b.gl.clearColor(a[0],a[1],a[2],a[3])):b.gl.clearColor(c[0],c[1],c[2],c[3]);b.gl.clear(b.gl.COLOR_BUFFER_BIT|b.gl.DEPTH_BUFFER_BIT)};b.clearWithStencil=function(a){if("object"!==typeof a||null===a)a={};if("object"!==typeof a.color||null===a.color)a.color=[];4===a.color.length?(a=new Float32Array(a.color),b.gl.clearColor(a[0],a[1],a[2],a[3])):b.gl.clearColor(c[0],c[1],c[2],c[3]);b.gl.clear(b.gl.COLOR_BUFFER_BIT|
b.gl.DEPTH_BUFFER_BIT|b.gl.STENCIL_BUFFER_BIT)};b.Object=function(a){if("object"!==typeof a||null===a)a={};if("object"!==typeof a.shaders||null===a.shaders)a.shaders=[];if("object"!==typeof a.vertices||null===a.vertices)a.vertices=[];if("object"!==typeof a.buffers||null===a.buffers)a.buffers=[];if("object"!==typeof a.vao||null===a.vao)a.vao=[];if("number"!==typeof a.vao_index||null===a.vao_index)a.vao_index=0;if("object"!==typeof a.textures||null===a.textures)a.textures=[];if("function"!==typeof a.callUniforms||
null===a.callUniforms)a.callUniforms=null;if("object"!==typeof a.geometry_mode||null===a.geometry_mode)a.geometry_mode=[];if("object"!==typeof a.geometry_first||null===a.geometry_first)a.geometry_first=[];if("object"!==typeof a.geometry_count||null===a.geometry_count)a.geometry_count=[];this.shaders=a.shaders;this.vertices=a.vertices;this.buffers=a.buffers;this.vao=a.vao;this.vao_index=a.vao_index;this.textures=a.textures;this.callUniforms=a.callUniforms;this.geometry_mode=a.geometry_mode;this.geometry_first=
a.geometry_first;this.geometry_count=a.geometry_count;if("number"!==typeof a.x||null===a.x)a.x=0;if("number"!==typeof a.y||null===a.y)a.y=0;if("number"!==typeof a.z||null===a.z)a.z=0;if("number"!==typeof a.x_speed||null===a.x_speed)a.x_speed=0;if("number"!==typeof a.y_speed||null===a.y_speed)a.y_speed=0;if("number"!==typeof a.z_speed||null===a.z_speed)a.z_speed=0;if("number"!==typeof a.x_origin||null===a.x_origin)a.x_origin=0;if("number"!==typeof a.y_origin||null===a.y_origin)a.y_origin=0;if("number"!==
typeof a.z_origin||null===a.z_origin)a.z_origin=0;this.x=a.x;this.y=a.y;this.z=a.z;this.x_speed=a.x_speed;this.y_speed=a.y_speed;this.z_speed=a.z_speed;this.x_origin=a.x_origin;this.y_origin=a.y_origin;this.z_origin=a.z_origin;if("number"!==typeof a.sx||null===a.sx)a.sx=1;if("number"!==typeof a.sy||null===a.sy)a.sy=1;if("number"!==typeof a.sz||null===a.sz)a.sz=1;if("number"!==typeof a.sx_speed||null===a.sx_speed)a.sx_speed=0;if("number"!==typeof a.sy_speed||null===a.sy_speed)a.sy_speed=0;if("number"!==
typeof a.sz_speed||null===a.sz_speed)a.sz_speed=0;this.sx=a.sx;this.sy=a.sy;this.sz=a.sz;this.sx_speed=a.sx_speed;this.sy_speed=a.sy_speed;this.sz_speed=a.sz_speed;if("number"!==typeof a.angle||null===a.angle)a.angle=0;if("number"!==typeof a.rx||null===a.rx)a.rx=1;if("number"!==typeof a.ry||null===a.ry)a.ry=1;if("number"!==typeof a.rz||null===a.rz)a.rz=1;if("number"!==typeof a.angle_speed||null===a.angle_speed)a.angle_speed=0;if("number"!==typeof a.rx_speed||null===a.rx_speed)a.rx_speed=0;if("number"!==
typeof a.ry_speed||null===a.ry_speed)a.ry_speed=0;if("number"!==typeof a.rz_speed||null===a.rz_speed)a.rz_speed=0;this.angle=a.angle;this.rx=a.rx;this.ry=a.ry;this.rz=a.rz;this.angle_speed=a.angle_speed;this.rx_speed=a.rx_speed;this.ry_speed=a.ry_speed;this.rz_speed=a.rz_speed;if("object"!==typeof a.ks||null===a.ks)a.ks=[1,1,1];if("object"!==typeof a.kd||null===a.kd)a.kd=[1,1,1];if("object"!==typeof a.ka||null===a.ka)a.ka=[1,1,1];this.ks=a.ks;this.kd=a.kd;this.ka=a.ka;if("number"!==typeof a.x_radius||
null===a.x_radius)a.x_radius=0;if("number"!==typeof a.y_radius||null===a.y_radius)a.y_radius=0;if("number"!==typeof a.z_radius||null===a.z_radius)a.z_radius=0;if("object"!==typeof a.sequence||null===a.sequence)a.sequence=[];if("object"!==typeof a.reserve||null===a.reserve)a.reserve=[];this.x_radius=a.x_radius;this.y_radius=a.y_radius;this.z_radius=a.z_radius;this.sequence=a.sequence;this.reserve=a.reserve};b.Object.prototype.registerShaders=function(a){this.shaders[this.shaders.length]=new b.Shaders(a)};
b.Object.prototype.registerUniforms=function(a){this.callUniforms=a};b.Object.prototype.registerVao=function(a){if("object"!==typeof a||null===a)a={};if("object"!==typeof a.vertices||null===a.vertices)a.vertices=[];if("object"!==typeof a.textures||null===a.textures)a.textures=[];if("number"!==typeof a.geometry_mode||null===a.geometry_mode)a.geometry_mode=b.gl.TRIANGLES;if("number"!==typeof a.geometry_first||null===a.geometry_first)a.geometry_first=0;if("number"!==typeof a.geometry_attribute_index||
null===a.geometry_attribute_index)a.geometry_attribute_index=0;if("number"!==typeof a.geometry_length||null===a.geometry_length)a.geometry_length=3;var d=this.vao.length;this.vao[d]=[];for(var c=this.vertices.length,e=0,f=a.vertices.length;e<f;e++)this.vertices[c+e]=a.vertices[e],this.registerVertices(c+e),this.vao[d][e]=this.buffers[this.buffers.length-1];this.textures[d]=[];e=0;for(f=a.textures.length;e<f;e++)this.textures[d][e]=a.textures[e];this.geometry_mode[d]=a.geometry_mode;this.geometry_first[d]=
a.geometry_first;this.geometry_count[d]=parseInt((this.vertices[c+a.geometry_attribute_index].length-a.geometry_first)/a.geometry_length)};b.Object.prototype.registerVertices=function(a){if(""===a||"undefined"===typeof a)a=0;this.buffers[this.buffers.length]=b.registerBuffer(this.vertices[a])};b.Object.prototype.pict=function(a){if("object"!==typeof a||null===a)a={};if("object"!==typeof a.attributes||null===a.attributes)a.attributes={};if("number"!==typeof a.shader_index||null===a.shader_index)a.shader_index=
0;b.gl.useProgram(this.shaders[a.shader_index].program);this.callVao(a.shader_index);this.callUniforms(a,b);b.gl.drawArrays(this.geometry_mode[this.vao_index],this.geometry_first[this.vao_index],this.geometry_count[this.vao_index]);b.gl.bindBuffer(b.gl.ARRAY_BUFFER,null);b.gl.bindTexture(b.gl.TEXTURE_2D,null)};b.Object.prototype.callVao=function(a){if(""===a||"undefined"===typeof a)a=0;for(var d=this.vao[this.vao_index],c=0,e=d.length;c<e;c++)b.gl.bindBuffer(b.gl.ARRAY_BUFFER,d[c]),b.gl.vertexAttribPointer(this.shaders[a].attributes[c],
this.shaders[a].unit_length[c],b.gl.FLOAT,!1,0,0)};b.Object.prototype.free=function(){if(null!==this.shaders)for(var a=0,d=this.shaders.length;a<d;a++){var c=this.shaders.length-1;if(null!==this.shaders[c].attributes)for(var e=0,f=this.shaders[c].attributes.length;e<f;e++){var h=this.shaders[c].attributes.length-1;b.gl.disableVertexAttribArray(this.shaders[c].attributes[h]);this.shaders[c].attributes[h]=null;this.shaders[c].attributes.pop()}this.shaders[c].attributes=null;b.gl.deleteProgram(this.shaders[c].program);
this.shaders[c].program=null;this.shaders[c]=null;this.shaders.pop()}this.shaders=null;if(null!==this.vertices)for(a=0,d=this.vertices.length;a<d;a++)this.vertices[this.vertices.length-1]=null,this.vertices.pop();this.vertices=null;if(null!==this.buffers)for(a=0,d=this.buffers.length;a<d;a++)c=this.buffers.length-1,b.gl.deleteBuffer(this.buffers[c]),this.buffers[c]=null,this.buffers.pop();this.buffers=null;if(null!==this.vao)for(a=0,d=this.vao.length;a<d;a++)this.vao[this.vao.length-1]=null,this.vao.pop();
this.vao_index=this.vao=null;if(null!==this.textures)for(a=0,d=this.textures.length;a<d;a++){c=this.textures.length-1;if(null!==this.textures[c])for(e=0,f=this.textures[c].length;e<f;e++)h=this.textures[c].length-1,b.gl.deleteTexture(this.textures[c][h]),this.textures[c][h]=null,this.textures[c].pop();this.textures[c]=null;this.textures.pop()}this.callUniforms=this.textures=null;if(null!==this.geometry_mode)for(a=0,d=this.geometry_mode.length;a<d;a++)this.geometry_mode[this.geometry_mode.length-1]=
null,this.geometry_mode.pop();this.geometry_mode=null;if(null!==this.geometry_first)for(a=0,d=this.geometry_first.length;a<d;a++)this.geometry_first[this.geometry_first.length-1]=null,this.geometry_first.pop();this.geometry_first=null;if(null!==this.geometry_count)for(a=0,d=this.geometry_count.length;a<d;a++)this.geometry_count[this.geometry_count.length-1]=null,this.geometry_count.pop();this.rz_speed=this.ry_speed=this.rx_speed=this.angle_speed=this.rz=this.ry=this.rx=this.angle=this.sz_speed=this.sy_speed=
this.sx_speed=this.sz=this.sy=this.sx=this.z_origin=this.y_origin=this.x_origin=this.z_speed=this.y_speed=this.x_speed=this.z=this.y=this.x=this.geometry_count=null;if(null!==this.ks)for(a=0,d=this.ks.length;a<d;a++)this.ks[this.ks.length-1]=null,this.ks.pop();this.ks=null;if(null!==this.kd)for(a=0,d=this.kd.length;a<d;a++)this.kd[this.kd.length-1]=null,this.kd.pop();this.kd=null;if(null!==this.ka)for(a=0,d=this.ka.length;a<d;a++)this.ka[this.ka.length-1]=null,this.ka.pop();this.z_radius=this.y_radius=
this.x_radius=this.ka=null;if(null!==this.sequence)for(a=0,d=this.sequence.length;a<d;a++){c=this.sequence.length-1;if(null!==this.sequence[c])for(e=0,f=this.sequence[c].length;e<f;e++)this.sequence[c][this.sequence[c].length-1]=null,this.sequence[c].pop();this.sequence[c]=null;this.sequence.pop()}this.sequence=null;if(null!==this.reserve)for(a=0,d=this.reserve.length;a<d;a++)this.reserve[this.reserve.length-1]=null,this.reserve.pop();this.reserve=null};b.Shaders=function(a){if("object"!==typeof a||
null===a)a={};if("string"!==typeof a.vertex_shader||null===a.vertex_shader)a.vertex_shader="";if("string"!==typeof a.fragment_shader||null===a.fragment_shader)a.fragment_shader="";if("object"!==typeof a.attributes||null===a.attributes)a.attributes=[];if("object"!==typeof a.unit_length||null===a.unit_length)a.unit_length=[];var d=b.getShader(a.vertex_shader),c=b.getShader(a.fragment_shader);this.program=b.gl.createProgram();this.attributes=[];this.unit_length=[];b.gl.attachShader(this.program,d);b.gl.attachShader(this.program,
c);b.gl.linkProgram(this.program);b.gl.getProgramParameter(this.program,b.gl.LINK_STATUS)||alert("Unable to initialize the shader program: "+b.gl.getProgramInfoLog(this.program));for(var e=0,f=a.attributes.length;e<f;e++)this.attributes[e]=b.gl.getAttribLocation(this.program,a.attributes[e]),b.gl.enableVertexAttribArray(this.attributes[e]);e=0;for(f=a.unit_length.length;e<f;e++)this.unit_length[e]=a.unit_length[e];b.gl.deleteShader(d);b.gl.deleteShader(c)};b.getShader=function(a){var d=document.getElementById(a);
if(!d)return!1;a="";for(var c=d.firstChild;c;)3==c.nodeType&&(a+=c.textContent),c=c.nextSibling;if("x-shader/x-fragment"==d.type)d=b.gl.createShader(b.gl.FRAGMENT_SHADER);else if("x-shader/x-vertex"==d.type)d=b.gl.createShader(b.gl.VERTEX_SHADER);else return!1;b.gl.shaderSource(d,a);b.gl.compileShader(d);return b.gl.getShaderParameter(d,b.gl.COMPILE_STATUS)?d:(alert("An error occurred compiling the shaders: "+b.gl.getShaderInfoLog(d)),!1)};b.registerBuffer=function(a){var d=b.gl.createBuffer();b.gl.bindBuffer(b.gl.ARRAY_BUFFER,
d);b.gl.bufferData(b.gl.ARRAY_BUFFER,new Float32Array(a),b.gl.STATIC_DRAW);b.gl.bindBuffer(b.gl.ARRAY_BUFFER,null);return d};b.ArrayObject=function(a){if("object"!==typeof a||"null"===a)a=new b.Object;Array.call(this);this.shaders=a.shaders;this.vertices=a.vertices;this.buffers=a.buffers;this.vao=a.vao;this.vao_index=a.vao_index;this.textures=a.textures;this.callUniforms=a.callUniforms;this.geometry_mode=a.geometry_mode;this.geometry_first=a.geometry_first;this.geometry_count=a.geometry_count;this.x=
a.x;this.y=a.y;this.z=a.z;this.x_speed=a.x_speed;this.y_speed=a.y_speed;this.z_speed=a.z_speed;this.x_origin=a.x_origin;this.y_origin=a.y_origin;this.z_origin=a.z_origin;this.sx=a.sx;this.sy=a.sy;this.sz=a.sz;this.sx_speed=a.sx_speed;this.sy_speed=a.sy_speed;this.sz_speed=a.sz_speed;this.angle=a.angle;this.rx=a.rx;this.ry=a.ry;this.rz=a.rz;this.angle_speed=a.angle_speed;this.rx_speed=a.rx_speed;this.ry_speed=a.ry_speed;this.rz_speed=a.rz_speed;this.ks=a.ks;this.kd=a.kd;this.ka=a.ka;this.x_radius=
a.x_radius;this.y_radius=a.y_radius;this.z_radius=a.z_radius;this.sequence=a.sequence;this.reserve=a.reserve};b.ArrayObject.prototype=Object.create(Array.prototype);b.ArrayObject.prototype.add=function(a){if("object"!==typeof a||null===a)a={};var d=new b.Object;if("object"!==typeof a.shaders||null===a.shaders)a.shaders=this.shaders;if("object"!==typeof a.vertices||null===a.vertices)a.vertices=this.vertices;if("object"!==typeof a.buffers||null===a.buffers)a.buffers=this.buffers;if("object"!==typeof a.vao||
null===a.vao)a.vao=this.vao;if("number"!==typeof a.vao_index||null===a.vao_index)a.vao_index=this.vao_index;if("object"!==typeof a.textures||null===a.textures)a.textures=this.textures;if("function"!==typeof a.callUniforms||null===a.callUniforms)a.callUniforms=this.callUniforms;if("object"!==typeof a.geometry_mode||null===a.geometry_mode)a.geometry_mode=this.geometry_mode;if("object"!==typeof a.geometry_first||null===a.geometry_first)a.geometry_first=this.geometry_first;if("object"!==typeof a.geometry_count||
null===a.geometry_count)a.geometry_count=this.geometry_count;d.shaders=a.shaders;d.vertices=a.vertices;d.buffers=a.buffers;d.vao=a.vao;d.vao_index=a.vao_index;d.textures=a.textures;d.callUniforms=a.callUniforms;d.geometry_mode=a.geometry_mode;d.geometry_first=a.geometry_first;d.geometry_count=a.geometry_count;if("number"!==typeof a.x||null===a.x)a.x=this.x;if("number"!==typeof a.y||null===a.y)a.y=this.y;if("number"!==typeof a.z||null===a.z)a.z=this.z;if("number"!==typeof a.x_speed||null===a.x_speed)a.x_speed=
this.x_speed;if("number"!==typeof a.y_speed||null===a.y_speed)a.y_speed=this.y_speed;if("number"!==typeof a.z_speed||null===a.z_speed)a.z_speed=this.z_speed;if("number"!==typeof a.x_origin||null===a.x_origin)a.x_origin=this.x_origin;if("number"!==typeof a.y_origin||null===a.y_origin)a.y_origin=this.y_origin;if("number"!==typeof a.z_origin||null===a.z_origin)a.z_origin=this.z_origin;d.x=a.x;d.y=a.y;d.z=a.z;d.x_speed=a.x_speed;d.y_speed=a.y_speed;d.z_speed=a.z_speed;d.x_origin=a.x_origin;d.y_origin=
a.y_origin;d.z_origin=a.z_origin;if("number"!==typeof a.sx||null===a.sx)a.sx=this.sx;if("number"!==typeof a.sy||null===a.sy)a.sy=this.sy;if("number"!==typeof a.sz||null===a.sz)a.sz=this.sz;if("number"!==typeof a.sx_speed||null===a.sx_speed)a.sx_speed=this.sx_speed;if("number"!==typeof a.sy_speed||null===a.sy_speed)a.sy_speed=this.sy_speed;if("number"!==typeof a.sz_speed||null===a.sz_speed)a.sz_speed=this.sz_speed;d.sx=a.sx;d.sy=a.sy;d.sz=a.sz;d.sx_speed=a.sx_speed;d.sy_speed=a.sy_speed;d.sz_speed=
a.sz_speed;if("number"!==typeof a.angle||null===a.angle)a.angle=this.angle;if("number"!==typeof a.rx||null===a.rx)a.rx=this.rx;if("number"!==typeof a.ry||null===a.ry)a.ry=this.ry;if("number"!==typeof a.rz||null===a.rz)a.rz=this.rz;if("number"!==typeof a.angle_speed||null===a.angle_speed)a.angle_speed=this.angle_speed;if("number"!==typeof a.rx_speed||null===a.rx_speed)a.rx_speed=this.rx_speed;if("number"!==typeof a.ry_speed||null===a.ry_speed)a.ry_speed=this.ry_speed;if("number"!==typeof a.rz_speed||
null===a.rz_speed)a.rz_speed=this.rz_speed;d.angle=a.angle;d.rx=a.rx;d.ry=a.ry;d.rz=a.rz;d.angle_speed=a.angle_speed;d.rx_speed=a.rx_speed;d.ry_speed=a.ry_speed;d.rz_speed=a.rz_speed;if("object"!==typeof a.ks||null===a.ks)a.ks=this.ks;if("object"!==typeof a.kd||null===a.kd)a.kd=this.kd;if("object"!==typeof a.ka||null===a.ka)a.ka=this.ka;d.ks=a.ks;d.kd=a.kd;d.ka=a.ka;if("number"!==typeof a.x_radius||null===a.x_radius)a.x_radius=this.x_radius;if("number"!==typeof a.y_radius||null===a.y_radius)a.y_radius=
this.y_radius;if("number"!==typeof a.z_radius||null===a.z_radius)a.z_radius=this.z_radius;if("object"!==typeof a.sequence||null===a.sequence)a.sequence=this.sequence;if("object"!==typeof a.reserve||null===a.reserve)a.reserve=this.reserve;d.x_radius=a.x_radius;d.y_radius=a.y_radius;d.z_radius=a.z_radius;d.sequence=a.sequence;d.reserve=a.reserve;this.push(d)};b.ArrayObject.prototype.pict=function(a){for(var b=0,c=this.length;b<c;b++)this[b].pict(a)};b.ArrayObject.prototype["delete"]=function(a){this[a]=
null;this.splice(a,1)};b.ArrayObject.prototype.deleteAll=function(){for(var a=0,b=this.length;a<b;a++)this["delete"](this.length-1)};b.ArrayObject.prototype.zSort=function(a){"undefined"===typeof a&&(a=1);for(var b=!0;b;)for(var b=!1,c=0,e=this.length-1;c<e;c++)0<this[c].z+a-(this[c+1].z+a)&&(b=this[c],this[c]=this[c+1],this[c+1]=b,b=!0)};b.ArrayObject.prototype.free=function(){for(var a=0,d=this.length;a<d;a++){var c=this.length-1;this[c].free();this[c]=null;this.pop()}if(null!==this.shaders)for(a=
0,d=this.shaders.length;a<d;a++){c=this.shaders.length-1;if(null!==this.shaders[c].attributes)for(var e=0,f=this.shaders[c].attributes.length;e<f;e++){var h=this.shaders[c].attributes.length-1;b.gl.disableVertexAttribArray(this.shaders[c].attributes[h]);this.shaders[c].attributes[h]=null;this.shaders[c].attributes.pop()}this.shaders[c].attributes=null;b.gl.deleteProgram(this.shaders[c].program);this.shaders[c].program=null;this.shaders[c]=null;this.shaders.pop()}this.shaders=null;if(null!==this.vertices)for(a=
0,d=this.vertices.length;a<d;a++)this.vertices[this.vertices.length-1]=null,this.vertices.pop();this.vertices=null;if(null!==this.buffers)for(a=0,d=this.buffers.length;a<d;a++)c=this.buffers.length-1,b.gl.deleteBuffer(this.buffers[c]),this.buffers[c]=null,this.buffers.pop();this.buffers=null;if(null!==this.vao)for(a=0,d=this.vao.length;a<d;a++)this.vao[this.vao.length-1]=null,this.vao.pop();this.vao_index=this.vao=null;if(null!==this.textures)for(a=0,d=this.textures.length;a<d;a++){c=this.textures.length-
1;if(null!==this.textures[c])for(e=0,f=this.textures[c].length;e<f;e++)h=this.textures[c].length-1,b.gl.deleteTexture(this.textures[c][h]),this.textures[c][h]=null,this.textures[c].pop();this.textures[c]=null;this.textures.pop()}this.callUniforms=this.textures=null;if(null!==this.geometry_mode)for(a=0,d=this.geometry_mode.length;a<d;a++)this.geometry_mode[this.geometry_mode.length-1]=null,this.geometry_mode.pop();this.geometry_mode=null;if(null!==this.geometry_first)for(a=0,d=this.geometry_first.length;a<
d;a++)this.geometry_first[this.geometry_first.length-1]=null,this.geometry_first.pop();this.geometry_first=null;if(null!==this.geometry_count)for(a=0,d=this.geometry_count.length;a<d;a++)this.geometry_count[this.geometry_count.length-1]=null,this.geometry_count.pop();this.rz_speed=this.ry_speed=this.rx_speed=this.angle_speed=this.rz=this.ry=this.rx=this.angle=this.sz_speed=this.sy_speed=this.sx_speed=this.sz=this.sy=this.sx=this.z_origin=this.y_origin=this.x_origin=this.z_speed=this.y_speed=this.x_speed=
this.z=this.y=this.x=this.geometry_count=null;if(null!==this.ks)for(a=0,d=this.ks.length;a<d;a++)this.ks[this.ks.length-1]=null,this.ks.pop();this.ks=null;if(null!==this.kd)for(a=0,d=this.kd.length;a<d;a++)this.kd[this.kd.length-1]=null,this.kd.pop();this.kd=null;if(null!==this.ka)for(a=0,d=this.ka.length;a<d;a++)this.ka[this.ka.length-1]=null,this.ka.pop();this.z_radius=this.y_radius=this.x_radius=this.ka=null;if(null!==this.sequence)for(a=0,d=this.sequence.length;a<d;a++){c=this.sequence.length-
1;if(null!==this.sequence[c])for(e=0,f=this.sequence[c].length;e<f;e++)this.sequence[c][this.sequence[c].length-1]=null,this.sequence[c].pop();this.sequence[c]=null;this.sequence.pop()}this.sequence=null;if(null!==this.reserve)for(a=0,d=this.reserve.length;a<d;a++)this.reserve[this.reserve.length-1]=null,this.reserve.pop();this.reserve=null};b.textureCubeMapByPath=function(a){if("object"!==typeof a||null===a||"string"!==typeof a.positive_x||null===a.positive_x||"string"!==typeof a.negative_x||null===
a.negative_x||"string"!==typeof a.positive_y||null===a.positive_y||"string"!==typeof a.negative_y||null===a.negative_y||"string"!==typeof a.positive_z||null===a.positive_z||"string"!==typeof a.negative_z||null===a.negative_z)return!1;if("number"!==typeof a.format||null===a.format)a.format=b.gl.RGBA;if("number"!==typeof a.type||null===a.type)a.type=b.gl.UNSIGNED_BYTE;if("number"!==typeof a.mag_filter||null===a.mag_filter)a.mag_filter=b.gl.LINEAR;if("number"!==typeof a.min_filter||null===a.min_filter)a.min_filter=
b.gl.LINEAR_MIPMAP_NEAREST;if("number"!==typeof a.wrap_s||null===a.wrap_s)a.wrap_s=b.gl.CLAMP_TO_EDGE;if("number"!==typeof a.wrap_t||null===a.wrap_t)a.wrap_t=b.gl.CLAMP_TO_EDGE;if("boolean"!==typeof a.use_mipmap||null===a.use_mipmap)a.use_mipmap=!0;if("object"!==typeof a.texture||null===a.texture)a.texture=b.gl.createTexture();var c=new Image;c.onload=function(){k(a)};c.src=a.positive_x;var g=new Image;g.onload=function(){k(a)};g.src=a.negative_x;var e=new Image;e.onload=function(){k(a)};e.src=a.positive_y;
var f=new Image;f.onload=function(){k(a)};f.src=a.negative_y;var h=new Image;h.onload=function(){k(a)};h.src=a.positive_z;var l=new Image;l.onload=function(){k(a)};l.src=a.negative_z;var m=0,k=function(a){m++;6===m&&(b.gl.bindTexture(b.gl.TEXTURE_CUBE_MAP,a.texture),b.gl.texImage2D(b.gl.TEXTURE_CUBE_MAP_POSITIVE_X,0,a.format,a.format,a.type,c),b.gl.texImage2D(b.gl.TEXTURE_CUBE_MAP_NEGATIVE_X,0,a.format,a.format,a.type,g),b.gl.texImage2D(b.gl.TEXTURE_CUBE_MAP_POSITIVE_Y,0,a.format,a.format,a.type,
e),b.gl.texImage2D(b.gl.TEXTURE_CUBE_MAP_NEGATIVE_Y,0,a.format,a.format,a.type,f),b.gl.texImage2D(b.gl.TEXTURE_CUBE_MAP_POSITIVE_Z,0,a.format,a.format,a.type,h),b.gl.texImage2D(b.gl.TEXTURE_CUBE_MAP_NEGATIVE_Z,0,a.format,a.format,a.type,l),b.gl.texParameteri(b.gl.TEXTURE_CUBE_MAP,b.gl.TEXTURE_MAG_FILTER,a.mag_filter),b.gl.texParameteri(b.gl.TEXTURE_CUBE_MAP,b.gl.TEXTURE_MIN_FILTER,a.min_filter),b.gl.texParameteri(b.gl.TEXTURE_CUBE_MAP,b.gl.TEXTURE_WRAP_S,a.wrap_s),b.gl.texParameteri(b.gl.TEXTURE_CUBE_MAP,
b.gl.TEXTURE_WRAP_T,a.wrap_t),a.use_mipmap&&b.gl.generateMipmap(b.gl.TEXTURE_CUBE_MAP),b.gl.bindTexture(b.gl.TEXTURE_2D,null))};return a.texture};b.textureCubeMapByPixels=function(a){if("object"!==typeof a||null===a||"object"!==typeof a.positive_x||null===a.positive_x||"object"!==typeof a.negative_x||null===a.negative_x||"object"!==typeof a.positive_y||null===a.positive_y||"object"!==typeof a.negative_y||null===a.negative_y||"object"!==typeof a.positive_z||null===a.positive_z||"object"!==typeof a.negative_z||
null===a.negative_z)return!1;if("number"!==typeof a.width||null===a.width)a.width=256;if("number"!==typeof a.height||null===a.height)a.height=256;if("number"!==typeof a.format||null===a.format)a.format=b.gl.RGBA;if("number"!==typeof a.type||null===a.type)a.type=b.gl.UNSIGNED_BYTE;if("number"!==typeof a.mag_filter||null===a.mag_filter)a.mag_filter=b.gl.LINEAR;if("number"!==typeof a.min_filter||null===a.min_filter)a.min_filter=b.gl.LINEAR_MIPMAP_NEAREST;if("number"!==typeof a.wrap_s||null===a.wrap_s)a.wrap_s=
b.gl.CLAMP_TO_EDGE;if("number"!==typeof a.wrap_t||null===a.wrap_t)a.wrap_t=b.gl.CLAMP_TO_EDGE;if("boolean"!==typeof a.use_mipmap||null===a.use_mipmap)a.use_mipmap=!0;if("object"!==typeof a.texture||null===a.texture)a.texture=b.gl.createTexture();b.gl.bindTexture(b.gl.TEXTURE_CUBE_MAP,a.texture);b.gl.texImage2D(b.gl.TEXTURE_CUBE_MAP_POSITIVE_X,0,a.format,a.width,a.height,0,a.format,a.type,a.positive_x);b.gl.texImage2D(b.gl.TEXTURE_CUBE_MAP_NEGATIVE_X,0,a.format,a.width,a.height,0,a.format,a.type,a.negative_x);
b.gl.texImage2D(b.gl.TEXTURE_CUBE_MAP_POSITIVE_Y,0,a.format,a.width,a.height,0,a.format,a.type,a.positive_y);b.gl.texImage2D(b.gl.TEXTURE_CUBE_MAP_NEGATIVE_Y,0,a.format,a.width,a.height,0,a.format,a.type,a.negative_y);b.gl.texImage2D(b.gl.TEXTURE_CUBE_MAP_POSITIVE_Z,0,a.format,a.width,a.height,0,a.format,a.type,a.positive_z);b.gl.texImage2D(b.gl.TEXTURE_CUBE_MAP_NEGATIVE_Z,0,a.format,a.width,a.height,0,a.format,a.type,a.negative_z);b.gl.texParameteri(b.gl.TEXTURE_CUBE_MAP,b.gl.TEXTURE_MAG_FILTER,
a.mag_filter);b.gl.texParameteri(b.gl.TEXTURE_CUBE_MAP,b.gl.TEXTURE_MIN_FILTER,a.min_filter);b.gl.texParameteri(b.gl.TEXTURE_CUBE_MAP,b.gl.TEXTURE_WRAP_S,a.wrap_s);b.gl.texParameteri(b.gl.TEXTURE_CUBE_MAP,b.gl.TEXTURE_WRAP_T,a.wrap_t);a.use_mipmap&&b.gl.generateMipmap(b.gl.TEXTURE_CUBE_MAP);b.gl.bindTexture(b.gl.TEXTURE_2D,null);return a.texture};b.texture2DByPath=function(a){if("object"!==typeof a||null===a||"string"!==typeof a.url||null===a.url)return!1;if("number"!==typeof a.format||null===a.format)a.format=
b.gl.RGBA;if("number"!==typeof a.type||null===a.type)a.type=b.gl.UNSIGNED_BYTE;if("number"!==typeof a.mag_filter||null===a.mag_filter)a.mag_filter=b.gl.LINEAR;if("number"!==typeof a.min_filter||null===a.min_filter)a.min_filter=b.gl.LINEAR_MIPMAP_NEAREST;if("number"!==typeof a.wrap_s||null===a.wrap_s)a.wrap_s=b.gl.REPEAT;if("number"!==typeof a.wrap_t||null===a.wrap_t)a.wrap_t=b.gl.REPEAT;if("boolean"!==typeof a.use_mipmap||null===a.use_mipmap)a.use_mipmap=!0;if("object"!==typeof a.texture||null===
a.texture)a.texture=b.gl.createTexture();a.image=new Image;a.image.onload=function(){b.handleTexture2DLoaded(a)};a.image.src=a.url;return a.texture};b.handleTexture2DLoaded=function(a){b.gl.bindTexture(b.gl.TEXTURE_2D,a.texture);b.gl.texImage2D(b.gl.TEXTURE_2D,0,a.format,a.format,a.type,a.image);b.gl.texParameteri(b.gl.TEXTURE_2D,b.gl.TEXTURE_MAG_FILTER,a.mag_filter);b.gl.texParameteri(b.gl.TEXTURE_2D,b.gl.TEXTURE_MIN_FILTER,a.min_filter);b.gl.texParameteri(b.gl.TEXTURE_2D,b.gl.TEXTURE_WRAP_S,a.wrap_s);
b.gl.texParameteri(b.gl.TEXTURE_2D,b.gl.TEXTURE_WRAP_T,a.wrap_t);a.use_mipmap&&b.gl.generateMipmap(b.gl.TEXTURE_2D);b.gl.bindTexture(b.gl.TEXTURE_2D,null)};b.texture2DByPixels=function(a){if("object"!==typeof a||null===a||"object"!==typeof a.pixels||null===a.pixels)return!1;if("number"!==typeof a.width||null===a.width)a.width=256;if("number"!==typeof a.height||null===a.height)a.height=256;if("number"!==typeof a.format||null===a.format)a.format=b.gl.RGBA;if("number"!==typeof a.type||null===a.type)a.type=
b.gl.UNSIGNED_BYTE;if("number"!==typeof a.mag_filter||null===a.mag_filter)a.mag_filter=b.gl.LINEAR;if("number"!==typeof a.min_filter||null===a.min_filter)a.min_filter=b.gl.LINEAR_MIPMAP_NEAREST;if("number"!==typeof a.wrap_s||null===a.wrap_s)a.wrap_s=b.gl.REPEAT;if("number"!==typeof a.wrap_t||null===a.wrap_t)a.wrap_t=b.gl.REPEAT;if("boolean"!==typeof a.use_mipmap||null===a.use_mipmap)a.use_mipmap=!0;if("object"!==typeof a.texture||null===a.texture)a.texture=b.gl.createTexture();b.gl.bindTexture(b.gl.TEXTURE_2D,
a.texture);b.gl.texImage2D(b.gl.TEXTURE_2D,0,a.format,a.width,a.height,0,a.format,a.type,a.pixels);b.gl.texParameteri(b.gl.TEXTURE_2D,b.gl.TEXTURE_MAG_FILTER,a.mag_filter);b.gl.texParameteri(b.gl.TEXTURE_2D,b.gl.TEXTURE_MIN_FILTER,a.min_filter);b.gl.texParameteri(b.gl.TEXTURE_2D,b.gl.TEXTURE_WRAP_S,a.wrap_s);b.gl.texParameteri(b.gl.TEXTURE_2D,b.gl.TEXTURE_WRAP_T,a.wrap_t);a.use_mipmap&&b.gl.generateMipmap(b.gl.TEXTURE_2D);b.gl.bindTexture(b.gl.TEXTURE_2D,null);return a.texture};b.makeEmptyTexture2D=
function(a){if("object"!==typeof a||null===a)a={};if("number"!==typeof a.width||null===a.width)a.width=256;if("number"!==typeof a.height||null===a.height)a.height=256;if("number"!==typeof a.format||null===a.format)a.format=b.gl.RGBA;if("number"!==typeof a.type||null===a.type)a.type=b.gl.UNSIGNED_BYTE;if("number"!==typeof a.mag_filter||null===a.mag_filter)a.mag_filter=b.gl.LINEAR;if("number"!==typeof a.min_filter||null===a.min_filter)a.min_filter=b.gl.LINEAR;if("number"!==typeof a.wrap_s||null===a.wrap_s)a.wrap_s=
b.gl.REPEAT;if("number"!==typeof a.wrap_t||null===a.wrap_t)a.wrap_t=b.gl.REPEAT;if("object"!==typeof a.texture||null===a.texture)a.texture=b.gl.createTexture();b.gl.bindTexture(b.gl.TEXTURE_2D,a.texture);b.gl.texImage2D(b.gl.TEXTURE_2D,0,a.format,a.width,a.height,0,a.format,a.type,null);b.gl.texParameteri(b.gl.TEXTURE_2D,b.gl.TEXTURE_MAG_FILTER,a.mag_filter);b.gl.texParameteri(b.gl.TEXTURE_2D,b.gl.TEXTURE_MIN_FILTER,a.min_filter);b.gl.texParameteri(b.gl.TEXTURE_2D,b.gl.TEXTURE_WRAP_S,a.wrap_s);b.gl.texParameteri(b.gl.TEXTURE_2D,
b.gl.TEXTURE_WRAP_T,a.wrap_t);b.gl.bindTexture(b.gl.TEXTURE_2D,null);return a.texture};b.makeFramebufferToTexture2D=function(a){if("object"!==typeof a||null===a||"object"!==typeof a.texture||null===a.texture)return!1;if("number"!==typeof a.format||null===a.format)a.format=b.gl.COLOR_ATTACHMENT0;if("object"!==typeof a.framebuffer||null===a.framebuffer)a.framebuffer=b.gl.createFramebuffer();b.gl.bindFramebuffer(b.gl.FRAMEBUFFER,a.framebuffer);b.gl.bindTexture(b.gl.TEXTURE_2D,a.texture);b.gl.framebufferTexture2D(b.gl.FRAMEBUFFER,
a.format,b.gl.TEXTURE_2D,a.texture,0);b.gl.bindTexture(b.gl.TEXTURE_2D,null);b.gl.bindFramebuffer(b.gl.FRAMEBUFFER,null);return a.framebuffer};b.readRGBAPixelsByte=function(a){if("object"!==typeof a||null===a)a={};if("number"!==typeof a.width||null===a.width)a.width=b.gl.drawingBufferWidth;if("number"!==typeof a.height||null===a.height)a.height=b.gl.drawingBufferHeight;var c=new Uint8Array(a.width*a.height*4);b.gl.readPixels(0,0,a.width,a.height,b.gl.RGBA,b.gl.UNSIGNED_BYTE,c);return c};b.readRGBAPixelsShort=
function(a){if("object"!==typeof a||null===a)a={};if("number"!==typeof a.width||null===a.width)a.width=b.gl.drawingBufferWidth;if("number"!==typeof a.height||null===a.height)a.height=b.gl.drawingBufferHeight;var c=new Uint16Array(a.width*a.height);b.gl.readPixels(0,0,a.width,a.height,b.gl.RGBA,b.gl.UNSIGNED_SHORT_4_4_4_4,c);return c};b.makeRenderbuffer=function(a){if("object"!==typeof a||null===a)a={};if("number"!==typeof a.width||null===a.width)a.width=256;if("number"!==typeof a.height||null===a.height)a.height=
256;if("number"!==typeof a.format||null===a.format)a.format=b.gl.RGBA4;a.renderbuffer=b.gl.createRenderbuffer();b.gl.bindRenderbuffer(b.gl.RENDERBUFFER,a.renderbuffer);b.gl.renderbufferStorage(b.gl.RENDERBUFFER,a.format,a.width,a.height);b.gl.bindRenderbuffer(b.gl.RENDERBUFFER,null);return a.renderbuffer};b.makeFramebufferToRenderbuffer=function(a){if("object"!==typeof a||null===a||"object"!==typeof a.renderbuffer||null===a.renderbuffer)return!1;if("number"!==typeof a.format||null===a.format)a.format=
b.gl.COLOR_ATTACHMENT0;if("object"!==typeof a.framebuffer||null===a.framebuffer)a.framebuffer=b.gl.createFramebuffer();b.gl.bindFramebuffer(b.gl.FRAMEBUFFER,a.framebuffer);b.gl.bindRenderbuffer(b.gl.RENDERBUFFER,a.renderbuffer);b.gl.framebufferRenderbuffer(b.gl.FRAMEBUFFER,a.format,b.gl.RENDERBUFFER,a.renderbuffer);b.gl.bindRenderbuffer(b.gl.RENDERBUFFER,null);b.gl.bindFramebuffer(b.gl.FRAMEBUFFER,null);return a.framebuffer};b.makeFramebuffer=function(){return b.gl.createFramebuffer()}},SENORUTL=
SENORUTL||{};SENORUTL.M_PI=3.141592653589793;SENORUTL.RAD_PER_ONE_DEG=2*SENORUTL.M_PI/360;SENORUTL.DEG_PER_ONE_RAD=360/(2*SENORUTL.M_PI);SENORUTL.normalizeVec3=function(b){var c=[],a=Math.sqrt(b[0]*b[0]+b[1]*b[1]+b[2]*b[2]);if(0===a)return c;c[0]=b[0]/a;c[1]=b[1]/a;c[2]=b[2]/a;return c};SENORUTL.dotProductVec3=function(b,c){return b[0]*c[0]+b[1]*c[1]+b[2]*c[2]};SENORUTL.crossProductVec3=function(b,c){return[b[1]*c[2]-b[2]*c[1],b[2]*c[0]-b[0]*c[2],b[0]*c[1]-b[1]*c[0]]};
SENORUTL.getAllZeroMat3=function(){return[0,0,0,0,0,0,0,0,0]};SENORUTL.getIdentityMat3=function(){return[1,0,0,0,1,0,0,0,1]};SENORUTL.getAllZeroMat4=function(){return[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]};SENORUTL.getIdentityMat4=function(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]};SENORUTL.multiplyMat4=function(b,c){for(var a=SENORUTL.getAllZeroMat4(),d=0,g=0;4>g;g++)for(var e=0;4>e;e++){for(var f=0,h=0;4>h;h++)f+=b[h+4*g]*c[e+4*h];a[d]=f;d++}return a};
SENORUTL.translateMat4=function(b){var c=SENORUTL.getIdentityMat4();c[12]=b[0];c[13]=b[1];c[14]=b[2];return c};SENORUTL.scaleMat4=function(b){var c=SENORUTL.getIdentityMat4();c[0]=b[0];c[5]=b[1];c[10]=b[2];return c};SENORUTL.rotateXMat4=function(b){b*=SENORUTL.RAD_PER_ONE_DEG;var c=SENORUTL.getIdentityMat4();c[5]=Math.cos(b);c[6]=Math.sin(b);c[9]=-Math.sin(b);c[10]=Math.cos(b);return c};
SENORUTL.rotateYMat4=function(b){b*=SENORUTL.RAD_PER_ONE_DEG;var c=SENORUTL.getIdentityMat4();c[0]=Math.cos(b);c[2]=-Math.sin(b);c[8]=Math.sin(b);c[10]=Math.cos(b);return c};SENORUTL.rotateZMat4=function(b){b*=SENORUTL.RAD_PER_ONE_DEG;var c=SENORUTL.getIdentityMat4();c[0]=Math.cos(b);c[1]=Math.sin(b);c[4]=-Math.sin(b);c[5]=Math.cos(b);return c};
SENORUTL.perspectiveMat4=function(b,c,a,d){b=Math.tan(b*SENORUTL.RAD_PER_ONE_DEG/2)*a;c=2*a/(b*c+b*c);b=a/b;var g=-(d+a)/(d-a);a=-(2*d*a)/(d-a);d=SENORUTL.getAllZeroMat4();d[0]=c;d[5]=b;d[10]=g;d[11]=-1;d[14]=a;return d};
SENORUTL.makeViewMat4=function(b,c,a){var d=SENORUTL.translateMat4([-b[0],-b[1],-b[2]]);b=SENORUTL.normalizeVec3([c[0]-b[0],c[1]-b[1],c[2]-b[2]]);a=SENORUTL.crossProductVec3(b,a);a=SENORUTL.normalizeVec3(a);c=SENORUTL.crossProductVec3(a,b);c=SENORUTL.normalizeVec3(c);var g=SENORUTL.getIdentityMat4();g[0]=a[0];g[1]=c[0];g[2]=-b[0];g[4]=a[1];g[5]=c[1];g[6]=-b[1];g[8]=a[2];g[9]=c[2];g[10]=-b[2];return SENORUTL.multiplyMat4(d,g)};
SENORUTL.makeVersor=function(b,c,a,d){var g=[];b*=SENORUTL.RAD_PER_ONE_DEG;c=SENORUTL.normalizeVec3([c,a,d]);g[0]=Math.cos(b/2);g[1]=Math.sin(b/2)*c[0];g[2]=Math.sin(b/2)*c[1];g[3]=Math.sin(b/2)*c[2];return g};SENORUTL.versorToMat4=function(b){var c=[],a=b[0],d=b[1],g=b[2];b=b[3];c[0]=1-2*g*g-2*b*b;c[1]=2*d*g+2*a*b;c[2]=2*d*b-2*a*g;c[3]=0;c[4]=2*d*g-2*a*b;c[5]=1-2*d*d-2*b*b;c[6]=2*g*b+2*a*d;c[7]=0;c[8]=2*d*b+2*a*g;c[9]=2*g*b-2*a*d;c[10]=1-2*d*d-2*g*g;c[11]=0;c[12]=0;c[13]=0;c[14]=0;c[15]=1;return c};
SENORUTL.scaleMat2=function(b,c){var a=[1,0,0,1];a[0]=b;a[3]=c;return a};SENORUTL.rotateMat2=function(b){b*=SENORUTL.RAD_PER_ONE_DEG;var c=[];c[0]=Math.cos(b);c[1]=Math.sin(b);c[2]=-Math.sin(b);c[3]=Math.cos(b);return c};SENORUTL.skewMat2=function(b,c){var a=b*SENORUTL.RAD_PER_ONE_DEG,d=[1,0,0,1];d[1]=Math.tan(c*SENORUTL.RAD_PER_ONE_DEG);d[2]=Math.tan(a);return d};
SENORUTL.attachObjRaw=function(b){b=document.getElementById(b);b=b.textContent;b=b.split(/\n+/);for(var c,a,d={},g=0,e=b.length;g<e;g++)switch(c=b[g].split(/\s+/),c[0]){case "v":d.geometry?a=d.geometry.vertices.length:(d.geometry={},d.geometry.vertices=[],d.geometry.index=[],a=0);d.geometry.vertices[a]=[];for(var f=1,h=c.length;f<h;f++)d.geometry.vertices[a][f-1]=parseFloat(c[f]);break;case "vt":d.texture?a=d.texture.vertices.length:(d.texture={},d.texture.vertices=[],d.texture.index=[],a=0);d.texture.vertices[a]=
[];f=1;for(h=c.length;f<h;f++)d.texture.vertices[a][f-1]=parseFloat(c[f]);break;case "vn":d.normal?a=d.normal.vertices.length:(d.normal={},d.normal.vertices=[],d.normal.index=[],a=0);d.normal.vertices[a]=[];f=1;for(h=c.length;f<h;f++)d.normal.vertices[a][f-1]=parseFloat(c[f]);break;case "vp":d.parameter||(d.parameter=[]);f=1;for(h=c.length;f<h;f++)d.parameter.push(parseFloat(c[f]));break;case "f":for(f=1,h=c.length;f<h;f++)a=c[f].split(/\//),""!==a[0]&&"undefined"!==typeof a[0]&&d.geometry.index.push(parseInt(a[0])),
""!==a[1]&&"undefined"!==typeof a[1]&&d.texture.index.push(parseInt(a[1])),""!==a[2]&&"undefined"!==typeof a[2]&&d.normal.index.push(parseInt(a[2]))}return d};SENORUTL.attachJSONRaw=function(b){b=document.getElementById(b);return b=JSON.parse(b.textContent)};SENORUTL.detachJSONRaw=function(b){return"object"!==typeof b||null===b?!1:JSON.stringify(b)};SENORUTL.object3DFromElement=function(b){b=document.getElementById(b);b=JSON.parse(b.textContent);return SENORUTL.object3D(b)};
SENORUTL.object3D=function(b){var c={};b.geometry&&(c.geometry=SENORUTL.makeVertices(b.geometry.vertices,b.geometry.index));b.texture&&(c.texture=SENORUTL.makeVertices(b.texture.vertices,b.texture.index));b.normal&&(c.normal=SENORUTL.makeVertices(b.normal.vertices,b.normal.index));b.ks&&(c.ks=b.ks);b.kd&&(c.kd=b.kd);b.ka&&(c.ka=b.ka);b.parameter&&(c.parameter=b.parameter);return c};SENORUTL.makeVertices=function(b,c){for(var a=[],d=0;d<c.length;d++)a=a.concat(b[c[d]-1]);return a};
SENORUTL.hitCheck=function(b,c){var a=b.x-c.x;0>a&&(a=-a);var d=b.y-c.y;0>d&&(d=-d);var g=b.z-c.z;0>g&&(g=-g);return a<b.x_radius+c.x_radius&&d<b.y_radius+c.y_radius&&g<b.z_radius+c.z_radius?!0:!1};SENORUTL.getRandomInt=function(b,c){return Math.round(Math.random()*(c-b))+b};SENORUTL.getRandomFloat=function(b,c){return Math.random()*(c-b)+b};
